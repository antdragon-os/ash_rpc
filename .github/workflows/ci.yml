# name: CI

# on:
#   push:
#     branches: [main, develop]
#     paths:
#       - "packages/ash_rpc/**"
#       - ".github/workflows/**"
#   pull_request:
#     branches: [main, develop]
#     paths:
#       - "packages/ash_rpc/**"
#       - ".github/workflows/**"

# jobs:
#   test:
#     name: Test (Elixir ${{ matrix.elixir }} / OTP ${{ matrix.otp }})
#     runs-on: ubuntu-latest
#     strategy:
#       matrix:
#         include:
#           - elixir: "1.15"
#             otp: "25"
#           - elixir: "1.16"
#             otp: "26"
#     defaults:
#       run:
#         working-directory: packages/ash_rpc

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4
#         with:
#           fetch-depth: 0

#       - name: Set up Elixir
#         uses: erlef/setup-beam@v1
#         with:
#           elixir-version: ${{ matrix.elixir }}
#           otp-version: ${{ matrix.otp }}

#       - name: Restore dependencies cache
#         uses: actions/cache@v4
#         with:
#           path: |
#             packages/ash_rpc/deps
#             packages/ash_rpc/_build
#           key: ${{ runner.os }}-mix-${{ matrix.elixir }}-${{ matrix.otp }}-${{ hashFiles('packages/ash_rpc/mix.lock') }}
#           restore-keys: |
#             ${{ runner.os }}-mix-${{ matrix.elixir }}-${{ matrix.otp }}-

#       - name: Install dependencies
#         run: mix deps.get

#       - name: Check formatting
#         run: mix format --check-formatted

#       - name: Compile with warnings as errors
#         run: mix compile --warnings-as-errors

#       - name: Run Credo
#         run: mix credo --strict

#       - name: Run tests
#         run: mix test

#       - name: Generate docs
#         run: mix docs

#   publish_docs:
#     name: Publish Documentation
#     runs-on: ubuntu-latest
#     needs: test
#     if: github.ref == 'refs/heads/main' && github.event_name == 'push'
#     defaults:
#       run:
#         working-directory: packages/ash_rpc

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4

#       - name: Set up Elixir
#         uses: erlef/setup-beam@v1
#         with:
#           elixir-version: "1.16"
#           otp-version: "26"

#       - name: Restore dependencies cache
#         uses: actions/cache@v4
#         with:
#           path: |
#             packages/ash_rpc/deps
#             packages/ash_rpc/_build
#           key: ${{ runner.os }}-mix-1.16-26-${{ hashFiles('packages/ash_rpc/mix.lock') }}

#       - name: Install dependencies
#         run: mix deps.get

#       - name: Generate docs
#         run: mix docs

#       - name: Deploy to GitHub Pages
#         uses: peaceiris/actions-gh-pages@v4
#         with:
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           publish_dir: packages/ash_rpc/doc
#           destination_dir: ash_rpc
